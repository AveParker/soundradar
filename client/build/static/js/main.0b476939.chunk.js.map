{"version":3,"sources":["Login.js","Player.js","TrackSearchResult.js","Dashboard.js","useAuth.js","App.js","reportWebVitals.js","index.js"],"names":["Login","Container","className","style","minHeight","href","Player","accessToken","trackUri","useState","play","setPlay","useEffect","token","showSaveIcon","callback","state","isPlaying","uris","TrackSearchResult","track","chooseTrack","cursor","onClick","src","albumUrl","height","width","title","artist","spotifyApi","SpotifyWebApi","clientId","Dashboard","code","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","axios","post","then","res","data","window","history","pushState","catch","location","interval","setInterval","clearInterval","useAuth","search","setSearch","searchResults","setSearchResults","playingTrack","setPlayingTrack","lyrics","setLyrics","get","params","cancel","searchTracks","body","tracks","items","map","smallestAlbumImage","album","images","reduce","smallest","image","artists","name","uri","url","Form","Control","type","placeholder","value","onChange","e","target","overflowY","length","whiteSpace","URLSearchParams","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4KAMe,SAASA,IACtB,OACE,cAACC,EAAA,EAAD,CACEC,UAAU,mDACVC,MAAO,CAAEC,UAAW,SAFtB,SAGE,mBAAGF,UAAU,yBAAyBG,KAP1C,kSAOI,kC,6CCRS,SAASC,EAAT,GAA4C,IAA1BC,EAAyB,EAAzBA,YAAaC,EAAY,EAAZA,SAC7C,EAAwBC,oBAAS,GAAjC,mBAAOC,EAAP,KAAaC,EAAb,KAIG,OAFAC,qBAAU,kBAAMD,GAAQ,KAAO,CAACH,IAE3BD,EACE,cAAC,IAAD,CACPM,MAAON,EACPO,cAAY,EACZC,SAAU,SAAAC,GACDA,EAAMC,WAAWN,GAAQ,IAElCD,KAAMA,EACNQ,KAAMV,EAAW,CAACA,GAAY,KARL,KCNd,SAASW,EAAT,GAAoD,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,YAK/C,OACI,sBAAKnB,UAAU,gCACfC,MAAO,CAACmB,OAAQ,WAChBC,QAPJ,WACIF,EAAYD,IAIZ,UAII,qBAAKI,IAAKJ,EAAMK,SAAUtB,MAAO,CAACuB,OAAQ,OAAQC,MAAO,UACzD,sBAAKzB,UAAU,OAAf,UACI,8BAAMkB,EAAMQ,QACZ,qBAAK1B,UAAU,aAAf,SAA6BkB,EAAMS,e,qBCP7CC,EAAa,I,OAAIC,GAAc,CACnCC,SAAU,qCAGG,SAASC,EAAT,GAA8B,IACrC1B,ECVO,SAAiB2B,GAC9B,MAAsCzB,qBAAtC,mBAAOF,EAAP,KAAoB4B,EAApB,KACA,EAAwC1B,qBAAxC,mBAAO2B,EAAP,KAAqBC,EAArB,KACA,EAAkC5B,qBAAlC,mBAAO6B,EAAP,KAAkBC,EAAlB,KAqCA,OAnCA3B,qBAAU,WACR4B,IACGC,KAAK,8BAA+B,CACnCP,SAEDQ,MAAK,SAAAC,GACJR,EAAeQ,EAAIC,KAAKrC,aACxB8B,EAAgBM,EAAIC,KAAKR,cACzBG,EAAaI,EAAIC,KAAKN,WACtBO,OAAOC,QAAQC,UAAU,GAAI,KAAM,QAEpCC,OAAM,WACLH,OAAOI,SAAW,SAErB,CAACf,IAEJtB,qBAAU,WACR,GAAKwB,GAAiBE,EAAtB,CACA,IAAMY,EAAWC,aAAY,WAC3BX,IACGC,KAAK,gCAAiC,CACrCL,iBAEDM,MAAK,SAAAC,GACJR,EAAeQ,EAAIC,KAAKrC,aACxBgC,EAAaI,EAAIC,KAAKN,cAEvBU,OAAM,WACLH,OAAOI,SAAW,SAEF,KAAlBX,EAAY,KAEhB,OAAO,kBAAMc,cAAcF,OAC1B,CAACd,EAAcE,IAEX/B,ED9Ba8C,CADsB,EAARnB,MAElC,EAA4BzB,mBAAS,IAArC,mBAAO6C,EAAP,KAAeC,EAAf,KACA,EAA0C9C,mBAAS,IAAnD,mBAAO+C,EAAP,KAAsBC,EAAtB,KACA,EAAwChD,qBAAxC,mBAAOiD,EAAP,KAAqBC,EAArB,KACA,EAA4BlD,mBAAS,IAArC,mBAAOmD,EAAP,KAAeC,EAAf,KAEA,SAASxC,EAAYD,GACnBuC,EAAgBvC,GAChBmC,EAAU,IACVM,EAAU,IAqDZ,OAlDAjD,qBAAU,WACH8C,GAELlB,IACGsB,IAAI,+BAAgC,CACnCC,OAAQ,CACN3C,MAAOsC,EAAa9B,MACpBC,OAAQ6B,EAAa7B,UAGxBa,MAAK,SAAAC,GACJkB,EAAUlB,EAAIC,KAAKgB,aAEtB,CAACF,IAEJ9C,qBAAU,WACHL,GACLuB,EAAWK,eAAe5B,KACzB,CAACA,IAEJK,qBAAU,WACR,IAAK0C,EAAQ,OAAOG,EAAiB,IACrC,GAAKlD,EAAL,CAEA,IAAIyD,GAAS,EAuBb,OAtBAlC,EAAWmC,aAAaX,GAAQZ,MAAK,SAAAC,GAC/BqB,GACJP,EACEd,EAAIuB,KAAKC,OAAOC,MAAMC,KAAI,SAAAjD,GACxB,IAAMkD,EAAqBlD,EAAMmD,MAAMC,OAAOC,QAC5C,SAACC,EAAUC,GACT,OAAIA,EAAMjD,OAASgD,EAAShD,OAAeiD,EACpCD,IAETtD,EAAMmD,MAAMC,OAAO,IAGrB,MAAO,CACL3C,OAAQT,EAAMwD,QAAQ,GAAGC,KACzBjD,MAAOR,EAAMyD,KACbC,IAAK1D,EAAM0D,IACXrD,SAAU6C,EAAmBS,YAM9B,kBAAOf,GAAS,MACtB,CAACV,EAAQ/C,IAGV,eAACN,EAAA,EAAD,CAAWC,UAAU,0BAA0BC,MAAO,CAAEuB,OAAQ,SAAhE,UACE,cAACsD,EAAA,EAAKC,QAAN,CACEC,KAAK,SACLC,YAAY,uBACZC,MAAO9B,EACP+B,SAAU,SAAAC,GAAC,OAAI/B,EAAU+B,EAAEC,OAAOH,UAEpC,sBAAKlF,UAAU,mBAAmBC,MAAO,CAAEqF,UAAW,QAAtD,UACGhC,EAAca,KAAI,SAAAjD,GAAK,OACtB,cAACD,EAAD,CACEC,MAAOA,EAEPC,YAAaA,GADRD,EAAM0D,QAIW,IAAzBtB,EAAciC,QACb,qBAAKvF,UAAU,cAAcC,MAAO,CAAEuF,WAAY,OAAlD,SACG9B,OAIP,8BACG,cAACtD,EAAD,CAAQC,YAAaA,EAAaC,SAAQ,OAAEkD,QAAF,IAAEA,OAAF,EAAEA,EAAcoB,WE5FnE,IAAM5C,EAAO,IAAIyD,gBAAgB9C,OAAOI,SAASK,QAAQQ,IAAI,QAM9C8B,MAJf,WACE,OAAO1D,EAAO,cAACD,EAAD,CAAWC,KAAQA,IAAW,cAAClC,EAAD,KCG/B6F,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBrD,MAAK,YAAkD,IAA/CsD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,K","file":"static/js/main.0b476939.chunk.js","sourcesContent":["import React from \"react\"\nimport { Container } from \"react-bootstrap\"\n\nconst AUTH_URL =\n  \"https://accounts.spotify.com/authorize?client_id=6bf879ed4da54d7f8ba7511074c72f00&response_type=code&redirect_uri=http://localhost:3000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state\"\n\nexport default function Login() {\n  return (\n    <Container\n      className=\"d-flex justify-content-center align-items-center\"\n      style={{ minHeight: \"100vh\" }}>\n      <a className=\"btn btn-success btn-lg\" href={AUTH_URL}>\n        Login With Spotify\n      </a>\n    </Container>\n  )\n}","import {useState, useEffect} from 'react'\nimport SpotifyPlayer from \"react-spotify-web-playback\"\n\nexport default function Player({ accessToken, trackUri }) {\n const [play, setPlay] = useState(false)\n\n    useEffect(() => setPlay(true), [trackUri])\n\n    if (!accessToken) return null\n    return <SpotifyPlayer\n    token={accessToken}\n    showSaveIcon\n    callback={state => {\n        if (!state.isPlaying) setPlay(false)\n    }}\n    play={play}\n    uris={trackUri ? [trackUri] : []}\n    />\n}\n\n","import React from 'react'\n\nexport default function TrackSearchResult({ track, chooseTrack }) {\n    function handlePlay() {\n        chooseTrack(track)\n    }\n\n    return ( \n        <div className=\"d-flex m-2 align-items-center\" \n        style={{cursor: 'pointer'}}\n        onClick={handlePlay}\n        >\n            <img src={track.albumUrl} style={{height: '64px', width: '64px'}} />\n            <div className=\"ml-3\">\n                <div>{track.title}</div>\n                <div className=\"text-muted\">{track.artist}</div>\n            </div>\n        </div>\n    )\n}\n\n","import { useState, useEffect } from \"react\"\nimport useAuth from \"./useAuth\"\nimport Player from \"./Player\"\nimport TrackSearchResult from \"./TrackSearchResult\"\nimport { Container, Form } from \"react-bootstrap\"\nimport SpotifyWebApi from \"spotify-web-api-node\"\nimport axios from \"axios\"\n\nconst spotifyApi = new SpotifyWebApi({\n  clientId: \"8b945ef10ea24755b83ac50cede405a0\",\n})\n\nexport default function Dashboard({ code }) {\n  const accessToken = useAuth(code)\n  const [search, setSearch] = useState(\"\")\n  const [searchResults, setSearchResults] = useState([])\n  const [playingTrack, setPlayingTrack] = useState()\n  const [lyrics, setLyrics] = useState(\"\")\n\n  function chooseTrack(track) {\n    setPlayingTrack(track)\n    setSearch(\"\")\n    setLyrics(\"\")\n  }\n\n  useEffect(() => {\n    if (!playingTrack) return\n\n    axios\n      .get(\"http://localhost:3001/lyrics\", {\n        params: {\n          track: playingTrack.title,\n          artist: playingTrack.artist,\n        },\n      })\n      .then(res => {\n        setLyrics(res.data.lyrics)\n      })\n  }, [playingTrack])\n\n  useEffect(() => {\n    if (!accessToken) return\n    spotifyApi.setAccessToken(accessToken)\n  }, [accessToken])\n\n  useEffect(() => {\n    if (!search) return setSearchResults([])\n    if (!accessToken) return\n\n    let cancel = false\n    spotifyApi.searchTracks(search).then(res => {\n      if (cancel) return\n      setSearchResults(\n        res.body.tracks.items.map(track => {\n          const smallestAlbumImage = track.album.images.reduce(\n            (smallest, image) => {\n              if (image.height < smallest.height) return image\n              return smallest\n            },\n            track.album.images[0]\n          )\n\n          return {\n            artist: track.artists[0].name,\n            title: track.name,\n            uri: track.uri,\n            albumUrl: smallestAlbumImage.url,\n          }\n        })\n      )\n    })\n\n    return () => (cancel = true)\n  }, [search, accessToken])\n\n  return (\n    <Container className=\"d-flex flex-column py-2\" style={{ height: \"100vh\" }}>\n      <Form.Control\n        type=\"search\"\n        placeholder=\"Search Songs/Artists\"\n        value={search}\n        onChange={e => setSearch(e.target.value)}\n      />\n      <div className=\"flex-grow-1 my-2\" style={{ overflowY: \"auto\" }}>\n        {searchResults.map(track => (\n          <TrackSearchResult\n            track={track}\n            key={track.uri}\n            chooseTrack={chooseTrack}\n          />\n        ))}\n        {searchResults.length === 0 && (\n          <div className=\"text-center\" style={{ whiteSpace: \"pre\" }}>\n            {lyrics}\n          </div>\n        )}\n      </div>\n      <div>\n         <Player accessToken={accessToken} trackUri={playingTrack?.uri} /> \n      </div>\n    </Container>\n  )\n}","import { useState, useEffect } from \"react\"\nimport axios from \"axios\"\n\nexport default function useAuth(code) {\n  const [accessToken, setAccessToken] = useState()\n  const [refreshToken, setRefreshToken] = useState()\n  const [expiresIn, setExpiresIn] = useState()\n\n  useEffect(() => {\n    axios\n      .post(\"http://localhost:3001/login\", {\n        code,\n      })\n      .then(res => {\n        setAccessToken(res.data.accessToken)\n        setRefreshToken(res.data.refreshToken)\n        setExpiresIn(res.data.expiresIn)\n        window.history.pushState({}, null, \"/\")\n      })\n      .catch(() => {\n        window.location = \"/\"\n      })\n  }, [code])\n\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return\n    const interval = setInterval(() => {\n      axios\n        .post(\"http://localhost:3001/refresh\", {\n          refreshToken,\n        })\n        .then(res => {\n          setAccessToken(res.data.accessToken)\n          setExpiresIn(res.data.expiresIn)\n        })\n        .catch(() => {\n          window.location = \"/\"\n        })\n    }, (expiresIn - 60) * 1000)\n\n    return () => clearInterval(interval)\n  }, [refreshToken, expiresIn])\n\n  return accessToken\n}\n","import React from 'react';\nimport './App.css';\nimport Login from './Login';\nimport \"bootstrap/dist/css/bootstrap.min.css\"\nimport Dashboard from './Dashboard'\n\nconst code = new URLSearchParams(window.location.search).get('code')\n\nfunction App() {\n  return code ? <Dashboard code = {code} /> : <Login />\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}